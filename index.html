<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Study Companion — Welcome</title>

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect width='100%25' height='100%25' rx='12' fill='%23136FF2'/%3E%3Ctext x='50%25' y='58%25' text-anchor='middle' font-family='Arial' font-size='38' fill='white'%3ESC%3C/text%3E%3C/svg%3E">

  <!-- CSS libs -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#136FF2">
  <meta name="mobile-web-app-capable" content="yes">
  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="apple-touch-icon" href="logo.png">
  <meta name="color-scheme" content="light dark">

  <!-- CSP -->
  <meta http-equiv="Content-Security-Policy"
  content="
    default-src 'self';
    img-src 'self' data: blob:;
    font-src 'self' data: https://cdnjs.cloudflare.com;
    style-src 'self' 'unsafe-inline' blob: https://cdn.jsdelivr.net https://cdnjs.cloudflare.com;
    style-src-elem 'self' 'unsafe-inline' blob: https://cdn.jsdelivr.net https://cdnjs.cloudflare.com;
    script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://unpkg.com;
    connect-src 'self' blob:;
    worker-src 'self' blob: https://cdnjs.cloudflare.com;
    object-src 'none';
    base-uri 'self';
    upgrade-insecure-requests;
  ">

  <style>
    :root{ --bg1:#0d6efd; --bg2:#6610f2; --bg3:#ffc107; }
    html,body{height:100%}
    body{
      margin:0; overflow:hidden;
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(13,110,253,.12), transparent 60%),
        radial-gradient(1000px 700px at 90% 20%, rgba(102,16,242,.12), transparent 60%),
        radial-gradient(1000px 800px at 50% 110%, rgba(255,193,7,.12), transparent 60%);
      background-color: var(--bs-body-bg);
    }
    [data-bs-theme="dark"] body{
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(13,110,253,.10), transparent 60%),
        radial-gradient(1000px 700px at 90% 20%, rgba(102,16,242,.10), transparent 60%),
        radial-gradient(1000px 800px at 50% 110%, rgba(255,193,7,.08), transparent 60%);
    }

    .stage{position:relative; height:100%; display:grid; place-items:center; overflow:hidden;}
    .blob{position:absolute; border-radius:50%; filter: blur(60px) saturate(1.1); opacity:.65; mix-blend-mode:screen; animation: drift 38s ease-in-out infinite;}
    .b1{width:48vw; height:48vw; left:-8vw; top:-6vh; background:radial-gradient(circle at 30% 30%, rgba(13,110,253,.45), rgba(13,110,253,0));}
    .b2{width:42vw; height:42vw; right:-10vw; top:-8vh; animation-delay:4s; background:radial-gradient(circle at 60% 40%, rgba(102,16,242,.45), rgba(102,16,242,0));}
    .b3{width:36vw; height:36vw; right:18vw; bottom:-10vh; animation-delay:8s; background:radial-gradient(circle at 40% 60%, rgba(255,193,7,.45), rgba(255,193,7,0));}
    @keyframes drift{0%,100%{transform:translate3d(0,0,0)}50%{transform:translate3d(4vw,-3vh,0)}}
    @media (prefers-reduced-motion: reduce){
      .blob{animation:none}
    }

    .glass{
      position:relative; width:min(780px, 92vw); padding:32px; border-radius:20px;
      background:rgba(255,255,255,.82); border:1px solid rgba(0,0,0,.08);
      box-shadow:0 20px 70px rgba(13,110,253,.18); -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px);
    }
    [data-bs-theme="dark"] .glass{
      background:rgba(28,28,30,.80); border-color:rgba(255,255,255,.14);
      box-shadow:0 20px 70px rgba(0,0,0,.55)
    }

    .logo{display:inline-grid; place-items:center; width:54px; height:54px; border-radius:12px; background:#136FF2; color:#fff; font-weight:800; font-size:22px; letter-spacing:.3px;}
    h1{font-weight:800; letter-spacing:.2px; margin:14px 0 6px}
    p.lead{color:#6c7a89; margin-bottom:16px}
    [data-bs-theme="dark"] p.lead{color:rgba(255,255,255,.80)}
    .cta{display:flex; gap:10px; flex-wrap:wrap}
    .cta .btn{padding:.65rem 1rem; border-radius:12px}
    .badges{display:flex; gap:12px; flex-wrap:wrap; margin-top:8px}
    .badge-chip{padding:.35rem .6rem; border-radius:999px; font-size:.8rem; background:rgba(13,110,253,.08)}
    [data-bs-theme="dark"] .badge-chip{background:rgba(255,255,255,.10)}
    .footer{position:absolute; bottom:18px; left:0; right:0; text-align:center; color:#6c7a89; font-size:.9rem}
    [data-bs-theme="dark"] .footer{color:rgba(255,255,255,.70)}

    /* Small screens: tame the blobs to reduce visual noise */
    @media (max-width: 576px){
      .blob{filter: blur(48px); opacity:.55}
    }
  </style>
</head>
<body>
  <div class="stage">
    <div class="blob b1" aria-hidden="true"></div>
    <div class="blob b2" aria-hidden="true"></div>
    <div class="blob b3" aria-hidden="true"></div>

    <div class="glass" role="main" aria-labelledby="app-title">
      <div class="d-flex align-items-center gap-3 mb-2">
        <div class="logo" aria-hidden="true">SC</div>
        <div>
          <h1 id="app-title" class="h3 mb-1">Study Companion</h1>
          <div class="badges" aria-label="Features">
            <span class="badge-chip">Read EPUB/PDF/DOCX</span>
            <span class="badge-chip">Notes & Highlights</span>
            <span class="badge-chip">Fast search</span>
            <span class="badge-chip">Dark mode</span>
          </div>
        </div>
      </div>
      <p class="lead">A focused reader with quick capture, simple pages, and a clean library — all offline-capable in your browser.</p>
      <div class="cta">
        <button id="enter-btn" type="button" class="btn btn-primary">
          <i class="fa-solid fa-rocket me-2" aria-hidden="true"></i>Enter app
        </button>
        <button id="theme-btn" type="button" class="btn btn-outline-secondary">
          <i class="fa-solid fa-moon me-2" aria-hidden="true"></i>Toggle theme
        </button>
      </div>
    </div>

    <div class="footer">Tip: you can import EPUB, PDF, DOCX, TXT, and MD files right from the Home screen.</div>
  </div>

  <script>
    (function(){
      const THEME_KEY='app_theme';
      const themeBtn=document.getElementById('theme-btn');
      const init=localStorage.getItem(THEME_KEY)||'light';
      document.documentElement.setAttribute('data-bs-theme',init);
      themeBtn?.addEventListener('click',()=>{
        const curr=document.documentElement.getAttribute('data-bs-theme')||'light';
        const next=curr==='light'?'dark':'light';
        document.documentElement.setAttribute('data-bs-theme',next);
        try{localStorage.setItem(THEME_KEY,next)}catch{}
      });
      document.getElementById('enter-btn')?.addEventListener('click',()=>{
        try{sessionStorage.setItem('landingHidden','1')}catch{}
        location.href='app.html';
      });
      // Optional: register SW early so landing can be cached too
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js').catch(()=>{});
      }
    })();
  </script>
</body>
</html>
